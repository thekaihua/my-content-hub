---
import type { BlogPostPreview } from '../types/blog';
import ContactCTA from '../components/ContactCTA.astro';
import Grid from '../components/Grid.astro';
import Hero from '../components/Hero.astro';
import BlogPreview from '../components/BlogPreview.astro';
import BaseLayout from '../layouts/BaseLayout.astro';

// This will be replaced by CMS-specific data fetching in each branch
// For now, we'll use placeholder data to test the UI
const posts: BlogPostPreview[] = [
  {
    slug: 'sample-post-1',
    title: 'Sample Blog Post One',
    excerpt: 'This is a sample blog post excerpt to show how the blog listing will look with real content.',
    publishedAt: '2024-01-15T10:00:00.000Z',
    featuredImage: '/assets/backgrounds/bg-main-light.svg',
    featuredImageAlt: 'Sample featured image',
    tags: ['development', 'astro', 'blog'],
    author: {
      name: 'Kai Hua'
    }
  },
  {
    slug: 'sample-post-2', 
    title: 'Another Sample Post',
    excerpt: 'Another sample post to demonstrate the blog grid layout and how multiple posts will appear.',
    publishedAt: '2024-01-10T10:00:00.000Z',
    tags: ['design', 'ui'],
    author: {
      name: 'Kai Hua'
    }
  }
];

// Sort posts by publish date (newest first)
const sortedPosts = posts.sort((a, b) => 
  new Date(b.publishedAt).getTime() - new Date(a.publishedAt).getTime()
);
---

<BaseLayout
  title="Blog | Kai Hua"
  description="Read my latest thoughts on development, design, and technology"
>
  <div class="stack gap-20">
    <main class="wrapper stack gap-8">
      <Hero
        title="Blog"
        tagline="Thoughts, insights, and updates on development and design."
        align="start"
      />
      <Grid variant="offset">
        {
          sortedPosts.map((post) => (
            <li>
              <BlogPreview post={post} />
            </li>
          ))
        }
      </Grid>
    </main>
    <ContactCTA />
  </div>
</BaseLayout>